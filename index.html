
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>8 Worst Earthquakes</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.css' rel='stylesheet' />


    <link rel="stylesheet" type="text/css" href="style/style.css">


</head>
<body>

<div id='map'></div>


<div id='features'>


<div id = "filler"></div>

    <section id='starter' class = 'active'>

        <h2>The 8 worst earthquakes since the 20th Century</h2>
        <p>Scroll down to begin</p>
        <br>

    </section>

    <section id='opening'>
        <h3>How do we measure earthquakes?</h3>
        <p>The Richter scale is a logarithmic scale used to tell the power (or magnitude) of earthquakes. Every increase of 1 on the Richter scale means an increase in amplitude by a factor of 10. This means that an earthquake that scores 3.0 is about 10 times the amplitude of one that scores 2.0. The energy that is released increases by a factor of about 32.</p>
        <p>Before the 20th Century, measurement of earthquakes relied mainly on the analysis of written sources, so there was often uncertainty in location and magnitude. After 1900, most earthquakes have some degree of instrumental records and this means that the locations and magnitudes are more reliable. This website discusses the 8 most powerful earthquakes since 1900.<p>
    </section>

     <section id='number8'>
        <h3>Aleutian Islands, Alaska</h3>
          <p class = "date">1 April 1946</p>
          <p class = "magnitude">8.7</p>
          <p>The 1946 Aleutian Islands earthquake occurred near the Aleutian Islands, Alaska on April 1. The tsunami this earthquake caused obliterated the Aleutian Island of Unimak, but had an almost imperceptible effect on the Alaskan mainland.
          <p>The tsunami caused by this earthquake is known as the April Fools' Day Tsunami in Hawaii because it happened on April 1, and many thought it to be an April Fool's Day prank.
    </section>

    <section id='number7'>
        <h3>Ecuador-Colombia</h3>
        <p class = "date">31 January 1906</p>
        <p class = "magnitude">8.8</p>
        <p>The 1906 Ecuador–Colombia earthquake occurred off the coast of Ecuador, near Esmeraldas. The earthquake had a moment magnitude of 8.8 and triggered a destructive tsunami that caused at least 500 casualties on the coast of Colombia.
</p>
    </section>

    <section id='number6'>
        <h3>Bio-Bio, Chile</h3>
        <p class = "date">27 February 2010</p>
        <p class = "magnitude">8.8</p>
        <p>The earthquake generated a blackout that affected 93 percent of the Chilean population and which went on for several days in some locations. President Michelle Bachelet declared a "state of catastrophe" and sent military troops to take control of the most affected areas. According to official sources, 525 people lost their lives, 25 people went missing and about 9% of the population in the affected regions lost their homes.</p>
    </section>

    <section id='number5'>
        <h3>Kamchatka Peninsula, Russia</h3>
        <p class = "date">4 November, 1952</p>
        <p class = "magnitude">9.0</p>
        <p>Initially assigned a magnitude of 8.2, the quake was revised to 9.0 in later years. A large tsunami resulted, causing destruction and loss of life around the Kamchatka peninsula and the Kuril Islands. Hawaii was also struck, with estimated damage of up to US$1 million and livestock losses, but no human casualties were recorded. Japan reported no casualties or damage. The tsunami reached as far as Alaska, Chile, and New Zealand.</p>

</p>
    </section>

    <section id='number4'>
      <h3>Great Tohoku Earthquake, Japan</h3>
      <p class = "date">11 March 2011</p>
      <p class = "magnitude">9.1</p>
      <p>The earthquake is often referred to in Japan as the Great East Japan Earthquake. It is the most powerful earthquake ever recorded in Japan, and the fourth most powerful earthquake in the world since modern record-keeping began in 1900.</p>
      <p>The tsunami that followed caused widespread destruction, as well as nuclear accidents -  primarily the level 7 meltdowns at three reactors in the Fukushima Daiichi Nuclear Power Plant complex.</p>
    </section>

    <section id='number3'>
      <h3>Sumatra - Andaman Islands Earthquake</h3>
      <p class = "date">26 December 2004</p>
      <p class = "magnitude">9.1</p>
      <p>The 2004 Indian Ocean earthquake and tsunami (also known as the Boxing Day Tsunami)
      The earthquake was the third largest ever recorded and had the longest duration of faulting ever observed; between eight and ten minutes. It caused the planet to vibrate as much as 10 millimetres (0.4 inches), and it remotely triggered earthquakes as far away as Alaska.</p>
      <p>The World Bank's estimated economic cost was US$235 billion, making it the costliest natural disaster in history.</p>
    </section>

    <section id='number2'>
      <h3>Prince William Sound Earthquake, Alaska</h3>
      <p class = "date">28 March 1964</p>
      <p class = "magnitude">9.2</p>
      <p>The 1964 Alaskan earthquake, also known as the Great Alaskan earthquake and Good Friday earthquake, occurred on Good Friday, March 27. Across south-central Alaska, ground fissures, collapsing structures, and tsunamis resulting from the earthquake caused about 131 deaths.</p>
      <p>Lasting four minutes and thirty-eight seconds, the magnitude 9.2 megathrust earthquake remains the most powerful earthquake recorded in North American history, and the second most powerful earthquake recorded in world history.</p>
    </section>

    <section id='number1'>
      <h3>Great Chilean Earthquake</h3>
      <p class = "date">22 May 2019</p>
      <p class = "magnitude">9.5</p>
      <p>The 1960 Valdivia earthquake or the Great Chilean earthquake is the most powerful earthquake ever recorded. Various studies have placed it at 9.4–9.6 on the moment magnitude scale. It occurred in the afternoon, and lasted approximately 10 minutes.</p>
      <p>The resulting tsunami affected southern Chile, Hawaii, Japan, the Philippines, eastern New Zealand, southeast Australia, and the Aleutian Islands. Waves as high as 10.7 metres were recorded 10,000 kilometres from the epicenter, and as far away as Japan and the Philippines.</p>
    </section>

    <section id='Ending'>
        <p>Made by <a href="http://gyanl.com">Gyan Lakhwani</a></p>
        <p>Based on <a href="https://vanukuru.github.io/githubSandbox/mapschool19/BhujDataStory">a similiar project</a> by Rishi Vanukuru</p>
        <p>September 2019</p>
    </section>

    </div>


<script>


mapboxgl.accessToken = 'pk.eyJ1IjoiZ3lhbmwiLCJhIjoiY2swNmNoY29kMDA2ZzNjbWN4MmRvbHlmYiJ9.HJHfadzLE1cNqce2G51BEQ';

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/gyanl/ck0blmyo93cnr1cpji397gs7z',
    center: [80.136,22.305],
    zoom: 1.5
});

var layerNames = [
    'quakes',
    'quakes-text'
];


map.on('load', function(){

    for(var i = 2; i<layerNames.length ; i++)
        {
         map.setLayoutProperty(layerNames[i], 'visibility', 'none');
        }
});


var chapters = {

    'starter':{
        curve:1,
        center: [80.136,22.305],
        zoom: 2,
        bearing: 0,
        pitch: 0,
        duration: 3000

    },

    'opening':{
        curve:1,
        center: [80.136,22.305],
        zoom: 1.25,
        bearing: 0,
        pitch: 10,
        duration: 6000

    },
        'number8':{
        center: [178.715,51.251],
        curve:1,
        zoom: 5,
        bearing: 0,
        pitch: 20,
        duration: 3000

    },
        'number7':{
        curve:1,
        center: [-79.369, 0.955],
        zoom: 5,
        bearing: 0,
        pitch: 10,
        duration: 3000

    },
        'number6':{
        curve:0.5,
        center: [-72.898,-36.122],
        zoom: 7,
        bearing: 0,
        pitch: 20,
        duration: 3000

    },
        'number5':{
        curve:0.5,
        center: [159.779,52.623],
        zoom: 5,
        bearing: 5,
        pitch: 30,
        duration: 5000

    },
        'number4':{
        curve:0.1,
        center: [142.373,38.297],
        zoom: 7.52,
        bearing: 0,
        pitch: 30,
        duration: 3000

    },
        'number3':{
        curve:1,
        center: [95.982,3.295],
        zoom: 7.52,
        bearing: 0,
        pitch: 0,
        duration: 3000

    },
        'number2':{
        curve:1,
        center: [-147.339,60.908],
        zoom: 7.52,
        bearing: 3,
        pitch: 20,
        duration: 3000

    },
        'number1':{
        curve:1,
        center: [-73.407,-38.143],
        zoom: 7.52,
        bearing: 0,
        pitch: 0,
        duration: 3000

    },

    'Ending': {
        curve:1,
        center: [80.136,22.305],
        zoom: 3.68,
        bearing: 0,
        pitch: 0,
        duration: 3000
    }

};

var chapterNameArray = Object.keys(chapters);

var chapterLayerData = {

    'layers': [

        {'name': 'starter', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'opening', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'number8', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'number7', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'number6', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'number5', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'number4', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'number3', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'number2', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'number1', 'activelayers': ['quakes', 'quakes-text']},
        {'name': 'Ending', 'activelayers': ['quakes', 'quakes-text']}
    ]

};


// On every scroll event, check which element is on screen
window.onscroll = function() {

    var chapterNames = Object.keys(chapters);
    for (var i = 0; i < chapterNames.length; i++) {
        var chapterName = chapterNames[i];



        if (isElementOnScreen(chapterName)) {

          if(chapterName == 'opening')
          {
            console.log('Peekaboo');
          }
            setActiveChapter(chapterName);
            break;
        }
    }
};

var activeChapterName = 'starter';

function setActiveChapter(chapterName) {

    if (chapterName == activeChapterName) return;

    map.flyTo(chapters[chapterName]);

    document.getElementById(chapterName).setAttribute('class', 'active');
    document.getElementById(activeChapterName).setAttribute('class', '');

    setActiveLayers(chapterName);
    activeChapterName = chapterName;

}

function setActiveLayers(chapterName)
    {
        var isFound = false;
        var chapterIndex = -1;
        for(var i = 0; i<chapterNameArray.length ; i++)
            {
                if(!isFound)
                    {
                        if(chapterNameArray[i]==chapterName)
                            {
                            isFound = true;
                            chapterIndex = i;
                            toggleLayerStates(chapterName, chapterIndex);
                            }
                    }


            }

    }


function toggleLayerStates(chapterName, chapterNum)
    {

        for(var i = 0; i<layerNames.length; i++)
            {
                map.setLayoutProperty(layerNames[i], 'visibility', 'none');
            }

        var chapterNameText = chapterNameArray[chapterNum];


        for(var x = 0; x < chapterLayerData.layers[chapterNum].activelayers.length ; x++ )
            {


                for(var i = 0; i<layerNames.length; i++)
                {

                    if(chapterLayerData.layers[chapterNum].activelayers[x] == layerNames[i])
                    {
                        map.setLayoutProperty(layerNames[i], 'visibility', 'visible');
                    }

                }

            }



    }


function isElementOnScreen(id) {
    var element = document.getElementById(id);
    var bounds = element.getBoundingClientRect();
    return (bounds.top < (window.innerHeight/2) && (bounds.bottom > 0) && (bounds.bottom > (window.innerHeight/2 )));
}



</script>

</body>
</html>
